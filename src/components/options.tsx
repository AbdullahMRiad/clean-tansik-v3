import { useContext, useEffect } from "react";
import { AppContext } from "../App";

function OptionsPanel() {
    const ctx = useContext(AppContext);
    if (!ctx) throw new Error("ContextError: Context passed to Header is null");
    const { setIsOptionsOpen, isOptionsOpen, darkMode, setDarkMode } = ctx;
    useEffect(() => {
        const options = document.getElementById("options") as HTMLDialogElement;
        if (isOptionsOpen) {
            if (options) options.showModal();
        } else {
            if (options) options.close();
        }
    }, [isOptionsOpen]);
    return (
        <dialog
            id="options"
            closedby="any"
            className="m-auto bg-transparent"
            onClose={() => setIsOptionsOpen(false)}>
            <div className="panel flex w-64! flex-row justify-between gap-2 align-middle">
                <button
                    className="button material-symbols-outlined h-12 w-12"
                    onClick={() => setIsOptionsOpen(false)}>
                    close
                </button>
                <div className="flex flex-col gap-2">
                    <div className="flex w-full flex-row justify-between gap-2">
                        <span className="text-base font-normal">
                            الوضع الداكن
                        </span>
                        <button
                            className="button text-base font-normal"
                            onClick={() => setDarkMode(!darkMode)}>
                            {darkMode ? "مفعل" : "غير مفعل"}
                        </button>
                    </div>
                    <div
                        id="contact-info"
                        className="flex flex-row justify-between">
                        <a
                            href="https://www.github.com/AbdullahMRiad/clean-tansik-v3/"
                            target="_blank"
                            className="h-6 w-6 rounded-full bg-white p-0.5 text-black">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 32 32"
                                fill="none">
                                <path
                                    fillRule="evenodd"
                                    clipRule="evenodd"
                                    d="M16 0C7.16 0 0 7.16 0 16C0 23.08 4.58 29.06 10.94 31.18C11.74 31.32 12.04 30.84 12.04 30.42C12.04 30.04 12.02 28.78 12.02 27.44C8 28.18 6.96 26.46 6.64 25.56C6.46 25.1 5.68 23.68 5 23.3C4.44 23 3.64 22.26 4.98 22.24C6.24 22.22 7.14 23.4 7.44 23.88C8.88 26.3 11.18 25.62 12.1 25.2C12.24 24.16 12.66 23.46 13.12 23.06C9.56 22.66 5.84 21.28 5.84 15.16C5.84 13.42 6.46 11.98 7.48 10.86C7.32 10.46 6.76 8.82 7.64 6.62C7.64 6.62 8.98 6.2 12.04 8.26C13.32 7.9 14.68 7.72 16.04 7.72C17.4 7.72 18.76 7.9 20.04 8.26C23.1 6.18 24.44 6.62 24.44 6.62C25.32 8.82 24.76 10.46 24.6 10.86C25.62 11.98 26.24 13.4 26.24 15.16C26.24 21.3 22.5 22.66 18.94 23.06C19.52 23.56 20.02 24.52 20.02 26.02C20.02 28.16 20 29.88 20 30.42C20 30.84 20.3 31.34 21.1 31.18C27.42 29.06 32 23.06 32 16C32 7.16 24.84 0 16 0V0Z"
                                    fill="currentColor"
                                />
                            </svg>
                        </a>
                        <a
                            href="https://t.me/AbdullahMRiad"
                            target="_blank"
                            className="h-6 w-6 overflow-clip rounded-full bg-[#54a9eb] text-white">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                className="p-0.5"
                                height="24"
                                viewBox="0 0 20 20"
                                width="24">
                                <path
                                    d="m 3.3305 9.1908 c 3.5079 -1.4967 5.847 -2.4835 7.0174 -2.9602 c 3.3417 -1.3612 4.0361 -1.5977 4.4886 -1.6055 c 0.0995 -0.0017 0.3221 0.0224 0.4663 0.137 c 0.1217 0.0967 0.1552 0.2274 0.1713 0.3191 c 0.016 0.0917 0.036 0.3007 0.0201 0.4639 c -0.1811 1.8634 -0.9646 6.3853 -1.3633 8.4723 c -0.1687 0.8831 -0.5032 1.0721 -0.8248 1.1011 c -0.6988 0.063 -1.227 -0.3452 -1.9038 -0.7797 c -1.0591 -0.6799 -1.4483 -0.863 -2.4763 -1.5264 c -1.188 -0.7667 -0.5399 -1.168 0.1372 -1.8567 c 0.1772 -0.1802 3.2779 -2.9879 3.3375 -3.2367 c 0.0075 -0.0311 -0.0946 -0.3422 -0.1649 -0.4035 s -0.1742 -0.0403 -0.2491 -0.0236 c -0.1062 0.0236 -1.7981 1.1188 -5.0756 3.2854 c -0.4802 0.3229 -0.9152 0.4803 -1.3049 0.4721 c -0.4296 -0.0091 -1.2561 -0.2379 -1.8705 -0.4335 c -0.7536 -0.2399 -1.0317 -0.3529 -0.9796 -0.7603 c 0.0272 -0.2122 0.2186 -0.4338 0.5744 -0.6649 z"
                                    fill="currentColor"
                                    width={4}
                                    height={4}
                                    fillRule="evenodd"
                                />
                            </svg>
                        </a>
                        <a
                            href="https://wa.me/966547332469"
                            target="_blank"
                            className="h-6 w-6 overflow-clip rounded-full text-white">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                className="bg-[#25D366] p-1"
                                width="24"
                                height="24"
                                viewBox="0 0 31 31"
                                fill="none">
                                <path
                                    d="M30.3139 14.8011C30.1739 10.9697 28.5594 7.34056 25.8073 4.67136C23.0552 2.00216 19.3784 0.499287 15.5446 0.476567H15.4722C12.8904 0.474649 10.3527 1.14494 8.10857 2.42148C5.86449 3.69802 3.99142 5.53682 2.67367 7.75695C1.35592 9.97709 0.6389 12.5021 0.593155 15.0834C0.547411 17.6648 1.17452 20.2135 2.41278 22.479L1.09794 30.3469C1.0958 30.363 1.09712 30.3794 1.10182 30.395C1.10651 30.4106 1.11448 30.425 1.12518 30.4373C1.13588 30.4496 1.14907 30.4594 1.16387 30.4662C1.17867 30.473 1.19475 30.4765 1.21103 30.4766H1.23365L9.01561 28.7456C11.0263 29.7109 13.2282 30.2118 15.4586 30.2112C15.6004 30.2112 15.7421 30.2112 15.8838 30.2112C17.8458 30.1552 19.7773 29.7112 21.5667 28.9048C23.3562 28.0984 24.9682 26.9456 26.3098 25.5129C27.6514 24.0802 28.696 22.396 29.3832 20.5574C30.0704 18.7189 30.3867 16.7625 30.3139 14.8011V14.8011ZM15.8099 27.6252C15.6923 27.6252 15.5747 27.6252 15.4586 27.6252C13.4874 27.6277 11.5444 27.156 9.79366 26.2501L9.39559 26.042L4.11815 27.289L5.09221 21.9497L4.86604 21.5667C3.78579 19.725 3.20393 17.6336 3.17778 15.4985C3.15163 13.3635 3.68208 11.2584 4.71689 9.39075C5.75171 7.52306 7.25518 5.95715 9.07924 4.84724C10.9033 3.73732 12.985 3.1217 15.1194 3.06101C15.238 3.06101 15.3571 3.06101 15.4767 3.06101C18.6992 3.07056 21.7889 4.34564 24.0802 6.61154C26.3715 8.87743 27.681 11.9528 27.7265 15.1749C27.7719 18.3971 26.5498 21.5081 24.3234 23.8378C22.0969 26.1675 19.0444 27.5293 15.8235 27.6298L15.8099 27.6252Z"
                                    fill="currentColor"
                                />
                                <path
                                    d="M10.2894 8.16663C10.1057 8.17022 9.92456 8.21063 9.75673 8.28548C9.5889 8.36033 9.43779 8.4681 9.31236 8.6024C8.95801 8.96579 7.96736 9.84034 7.91006 11.6769C7.85277 13.5134 9.13594 15.3304 9.31537 15.5852C9.49481 15.84 11.7686 19.8072 15.5141 21.416C17.7156 22.3645 18.6806 22.5273 19.3063 22.5273C19.5642 22.5273 19.7587 22.5002 19.9622 22.4881C20.6483 22.4459 22.1969 21.6528 22.5346 20.7903C22.8724 19.9278 22.895 19.1739 22.806 19.0231C22.7171 18.8723 22.4728 18.7637 22.1049 18.5707C21.737 18.3777 19.9321 17.4127 19.5928 17.277C19.467 17.2184 19.3316 17.1832 19.1932 17.173C19.1031 17.1777 19.0155 17.2043 18.938 17.2506C18.8605 17.2968 18.7954 17.3613 18.7484 17.4383C18.4469 17.8138 17.7548 18.6295 17.5225 18.8648C17.4718 18.9232 17.4093 18.9703 17.3392 19.0031C17.2691 19.0358 17.1928 19.0534 17.1154 19.0548C16.9728 19.0485 16.8333 19.0109 16.7068 18.9447C15.6135 18.4804 14.6167 17.8155 13.768 16.9845C12.975 16.2029 12.3022 15.3081 11.7716 14.3292C11.5666 13.9492 11.7716 13.7532 11.9586 13.5753C12.1456 13.3973 12.3461 13.1516 12.5391 12.9389C12.6975 12.7573 12.8295 12.5543 12.9312 12.3358C12.9838 12.2344 13.0104 12.1215 13.0085 12.0073C13.0067 11.893 12.9765 11.7811 12.9206 11.6814C12.8317 11.4914 12.1667 9.62321 11.8546 8.87381C11.6013 8.23298 11.2997 8.21187 11.0358 8.19227C10.8187 8.17719 10.5699 8.16965 10.3211 8.16211H10.2894"
                                    fill="currentColor"
                                />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </dialog>
    );
}

export default OptionsPanel;
